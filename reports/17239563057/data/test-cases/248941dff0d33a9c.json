{"uid":"248941dff0d33a9c","name":"test_turnlamp_synchronflash_alternative[7]","fullName":"tests.turnlamp.test_synchron_flash#test_turnlamp_synchronflash_alternative","historyId":"a587a4d111f431e99e82465ede0096e4","time":{"start":1756215850582,"stop":1756215857943,"duration":7361},"description":"\n    Direct usage of capture instance instead of using it as contextmanager using 'with' statement.\n    ","descriptionHtml":"<pre><code>Direct usage of capture instance instead of using it as contextmanager using 'with' statement.\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: Right signal should have at least one signal change.\nassert not True\n +  where True = Index([], dtype='float64').empty","statusTrace":"ta = <openta.testing.testenv.TestEnvironmentAccess object at 0x0000016FDA848CD0>\nbattery_voltage = 7\n\n    @pytest.mark.parametrize(\"battery_voltage\", range(6, 15, 1))\n    @pytest.mark.turnlamp\n    def test_turnlamp_synchronflash_alternative(\n        ta: TestEnvironmentAccess,\n        battery_voltage: float,\n    ):\n        \"\"\"\n        Direct usage of capture instance instead of using it as contextmanager using 'with' statement.\n        \"\"\"\n        # == Arrange ===\n        with allure.step(\"Arrange: Set initial values and ensure load is connected\"):\n            # #####################################\n            # Arrange\n            # #####################################\n            # Set battery voltage due to given parameter\n            ta.vars.BatteryVoltage.value = battery_voltage\n    \n            # Ensure lever is turned OFF\n            ta.vars.TurnSignalLever.value = constants.TURNSIGNAL_LEVER.OFF\n    \n        # #####################################\n        # Act\n        # #####################################\n        with allure.step(\"Act: Start capture and test\"):\n            # Configure and start capture\n            capture = Capturing(\n                [\n                    ta.vars.TurnSignalLever,\n                    ta.vars.TurnSignalFrontRight,\n                    ta.vars.TurnSignalFrontLeft,\n                    ta.vars.TurnSignalRearRight,\n                    ta.vars.TurnSignalRearLeft,\n                ],\n                start_trigger=(\"TurnSignalLever >= 1\", -0.1),\n                stop_trigger=(\"TurnSignalLever <= 0\", 0.1),\n            )\n    \n            capture.start()\n            try:\n                time.sleep(1)\n                # Start blinking -> Turn right\n                ta.vars.TurnSignalLever.value = constants.TURNSIGNAL_LEVER.RIGHT\n                time.sleep(3)\n                ta.vars.TurnSignalLever.value = constants.TURNSIGNAL_LEVER.OFF\n                # the capture is stopped here,\n                # if the following and its reaction, flashing of left lights, is captured\n                # then the test will fail\n                time.sleep(1)\n                ta.vars.TurnSignalLever.value = constants.TURNSIGNAL_LEVER.LEFT\n                time.sleep(2)\n                ta.vars.TurnSignalLever.value = constants.TURNSIGNAL_LEVER.OFF\n            finally:\n                capture.stop()\n    \n        # ##########################################\n        # Prepare Assert and reporting\n        # ##########################################\n        # Do common check and reporting for usecase \"Turn to right\"\n>       common_evaluation_turnlamp_right_side(ta, capture)\n\ntests\\turnlamp\\test_synchron_flash.py:313: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nta = <openta.testing.testenv.TestEnvironmentAccess object at 0x0000016FDA848CD0>\ncapture = <openta.testing.capturing.Capturing object at 0x0000016FDFB420D0>\n\n    def common_evaluation_turnlamp_right_side(ta: TestEnvironmentAccess, capture: Capturing):\n        \"\"\"\n        Common checks (assert) for \"Turn right\" testcase:\n            - Check response time of light after lever has been activated.\n            - Check no flashes at left side\n            - Check at least one flash at right side\n    \n        Plot signals to report:\n            - TurnSignalLever\n            - RightFrontSignal\n            - LeftFrontSignal\n    \n        Params:  ta - TestEnvironmentAccess\n                capture - TA SDK Capture (multiport contextmanager)\n        \"\"\"\n        # Get current value of battery voltage for reporting\n        battery_voltage = ta.vars.BatteryVoltage.value\n    \n        # ##########################################\n        # Prepare Assert and reporting\n        # ##########################################\n        with allure.step(\"Assert: Get signals and plot\"):\n            utils.plot_dataframe_to_report(\n                capture.get_data_frame(),\n                layout=[\n                    \"TurnSignalLever\",\n                    [\"TurnSignalFrontLeft\", \"TurnSignalRearLeft\"],\n                    [\"TurnSignalFrontRight\", \"TurnSignalRearRight\"],\n                ],\n            )\n            # Get captured signals\n            turn_sig_lever = capture.get_signal(ta.vars.TurnSignalLever)\n            front_left_sig = capture.get_signal(ta.vars.TurnSignalFrontLeft)\n            front_right_sig = capture.get_signal(ta.vars.TurnSignalFrontRight)\n    \n            # Get signal changes from measured signals\n            time_stamps_lever = turn_sig_lever[(turn_sig_lever.diff() == 1)].index\n            time_stamps_left = front_left_sig[(front_left_sig.diff() == 1)].index\n            time_stamps_right = front_right_sig[(front_right_sig.diff() == 1)].index\n    \n            # ##########################################\n            # Assert\n            # ##########################################\n            expected_response_time = 0.3\n    \n            # Check if signal changes at right side has been detected.\n>           assert not time_stamps_right.empty, \"Right signal should have at least one signal change.\"\nE           AssertionError: Right signal should have at least one signal change.\nE           assert not True\nE            +  where True = Index([], dtype='float64').empty\n\ntests\\turnlamp\\test_synchron_flash.py:68: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"ta","time":{"start":1756215653768,"stop":1756215686686,"duration":32918},"status":"passed","steps":[{"name":"Setup Ports","time":{"start":1756215653890,"stop":1756215686686,"duration":32796},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\n    Direct usage of capture instance instead of using it as contextmanager using 'with' statement.\n    ","status":"failed","statusMessage":"AssertionError: Right signal should have at least one signal change.\nassert not True\n +  where True = Index([], dtype='float64').empty","statusTrace":"ta = <openta.testing.testenv.TestEnvironmentAccess object at 0x0000016FDA848CD0>\nbattery_voltage = 7\n\n    @pytest.mark.parametrize(\"battery_voltage\", range(6, 15, 1))\n    @pytest.mark.turnlamp\n    def test_turnlamp_synchronflash_alternative(\n        ta: TestEnvironmentAccess,\n        battery_voltage: float,\n    ):\n        \"\"\"\n        Direct usage of capture instance instead of using it as contextmanager using 'with' statement.\n        \"\"\"\n        # == Arrange ===\n        with allure.step(\"Arrange: Set initial values and ensure load is connected\"):\n            # #####################################\n            # Arrange\n            # #####################################\n            # Set battery voltage due to given parameter\n            ta.vars.BatteryVoltage.value = battery_voltage\n    \n            # Ensure lever is turned OFF\n            ta.vars.TurnSignalLever.value = constants.TURNSIGNAL_LEVER.OFF\n    \n        # #####################################\n        # Act\n        # #####################################\n        with allure.step(\"Act: Start capture and test\"):\n            # Configure and start capture\n            capture = Capturing(\n                [\n                    ta.vars.TurnSignalLever,\n                    ta.vars.TurnSignalFrontRight,\n                    ta.vars.TurnSignalFrontLeft,\n                    ta.vars.TurnSignalRearRight,\n                    ta.vars.TurnSignalRearLeft,\n                ],\n                start_trigger=(\"TurnSignalLever >= 1\", -0.1),\n                stop_trigger=(\"TurnSignalLever <= 0\", 0.1),\n            )\n    \n            capture.start()\n            try:\n                time.sleep(1)\n                # Start blinking -> Turn right\n                ta.vars.TurnSignalLever.value = constants.TURNSIGNAL_LEVER.RIGHT\n                time.sleep(3)\n                ta.vars.TurnSignalLever.value = constants.TURNSIGNAL_LEVER.OFF\n                # the capture is stopped here,\n                # if the following and its reaction, flashing of left lights, is captured\n                # then the test will fail\n                time.sleep(1)\n                ta.vars.TurnSignalLever.value = constants.TURNSIGNAL_LEVER.LEFT\n                time.sleep(2)\n                ta.vars.TurnSignalLever.value = constants.TURNSIGNAL_LEVER.OFF\n            finally:\n                capture.stop()\n    \n        # ##########################################\n        # Prepare Assert and reporting\n        # ##########################################\n        # Do common check and reporting for usecase \"Turn to right\"\n>       common_evaluation_turnlamp_right_side(ta, capture)\n\ntests\\turnlamp\\test_synchron_flash.py:313: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nta = <openta.testing.testenv.TestEnvironmentAccess object at 0x0000016FDA848CD0>\ncapture = <openta.testing.capturing.Capturing object at 0x0000016FDFB420D0>\n\n    def common_evaluation_turnlamp_right_side(ta: TestEnvironmentAccess, capture: Capturing):\n        \"\"\"\n        Common checks (assert) for \"Turn right\" testcase:\n            - Check response time of light after lever has been activated.\n            - Check no flashes at left side\n            - Check at least one flash at right side\n    \n        Plot signals to report:\n            - TurnSignalLever\n            - RightFrontSignal\n            - LeftFrontSignal\n    \n        Params:  ta - TestEnvironmentAccess\n                capture - TA SDK Capture (multiport contextmanager)\n        \"\"\"\n        # Get current value of battery voltage for reporting\n        battery_voltage = ta.vars.BatteryVoltage.value\n    \n        # ##########################################\n        # Prepare Assert and reporting\n        # ##########################################\n        with allure.step(\"Assert: Get signals and plot\"):\n            utils.plot_dataframe_to_report(\n                capture.get_data_frame(),\n                layout=[\n                    \"TurnSignalLever\",\n                    [\"TurnSignalFrontLeft\", \"TurnSignalRearLeft\"],\n                    [\"TurnSignalFrontRight\", \"TurnSignalRearRight\"],\n                ],\n            )\n            # Get captured signals\n            turn_sig_lever = capture.get_signal(ta.vars.TurnSignalLever)\n            front_left_sig = capture.get_signal(ta.vars.TurnSignalFrontLeft)\n            front_right_sig = capture.get_signal(ta.vars.TurnSignalFrontRight)\n    \n            # Get signal changes from measured signals\n            time_stamps_lever = turn_sig_lever[(turn_sig_lever.diff() == 1)].index\n            time_stamps_left = front_left_sig[(front_left_sig.diff() == 1)].index\n            time_stamps_right = front_right_sig[(front_right_sig.diff() == 1)].index\n    \n            # ##########################################\n            # Assert\n            # ##########################################\n            expected_response_time = 0.3\n    \n            # Check if signal changes at right side has been detected.\n>           assert not time_stamps_right.empty, \"Right signal should have at least one signal change.\"\nE           AssertionError: Right signal should have at least one signal change.\nE           assert not True\nE            +  where True = Index([], dtype='float64').empty\n\ntests\\turnlamp\\test_synchron_flash.py:68: AssertionError","steps":[{"name":"Arrange: Set initial values and ensure load is connected","time":{"start":1756215850582,"stop":1756215850589,"duration":7},"status":"passed","steps":[{"name":"BatteryVoltage = 7","time":{"start":1756215850582,"stop":1756215850588,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"TurnSignalLever = 0","time":{"start":1756215850588,"stop":1756215850589,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Act: Start capture and test","time":{"start":1756215850589,"stop":1756215857660,"duration":7071},"status":"passed","steps":[{"name":"TurnSignalLever = 1","time":{"start":1756215851642,"stop":1756215851644,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"TurnSignalLever = 0","time":{"start":1756215854645,"stop":1756215854647,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"TurnSignalLever = -1","time":{"start":1756215855648,"stop":1756215855649,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"TurnSignalLever = 0","time":{"start":1756215857650,"stop":1756215857652,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Assert: Get signals and plot","time":{"start":1756215857661,"stop":1756215857942,"duration":281},"status":"failed","statusMessage":"AssertionError: Right signal should have at least one signal change.\nassert not True\n +  where True = Index([], dtype='float64').empty\n","statusTrace":"  File \"C:\\actions-runner\\_work\\dspace-virtual-workbench\\dspace-virtual-workbench\\PythonSDK_Turnlamp\\tests\\turnlamp\\test_synchron_flash.py\", line 68, in common_evaluation_turnlamp_right_side\n    assert not time_stamps_right.empty, \"Right signal should have at least one signal change.\"\n","steps":[],"attachments":[{"uid":"95926c47fb2bdbee","name":"All signals","source":"95926c47fb2bdbee.svg","type":"image/svg+xml","size":49677}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"75a9522de6e9bd2f","name":"log","source":"75a9522de6e9bd2f.txt","type":"text/plain","size":164}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":9,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"ta::0","time":{"start":1756215943711,"stop":1756215943780,"duration":69},"status":"passed","steps":[{"name":"Teardown Ports","time":{"start":1756215943711,"stop":1756215943780,"duration":69},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"labels":[{"name":"tag","value":"turnlamp"},{"name":"parentSuite","value":"tests.turnlamp"},{"name":"suite","value":"test_synchron_flash"},{"name":"host","value":"EC2AMAZ-ECKNJ6M"},{"name":"thread","value":"5860-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.turnlamp.test_synchron_flash"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"battery_voltage","value":"7"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"281422d8a9859e9f","status":"failed","statusDetails":"AssertionError: Right signal should have at least one signal change.\nassert not True\n +  where True = Index([], dtype='float64').empty","time":{"start":1756215034937,"stop":1756215042410,"duration":7473}}],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":["turnlamp"]},"source":"248941dff0d33a9c.json","parameterValues":["7"]}